<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: app/swagger/swagger.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: app/swagger/swagger.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module swagger.mjs swagger generation
 */
import fs from "fs";
import { fileURLToPath } from "url";
import path from "path";

import yaml from 'js-yaml';
import dotenv from 'dotenv';
import swaggerAutogen from 'swagger-autogen';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

function loadDoc(params) {
  const filePath = path.resolve(__dirname, 'doc.yaml');
  let data = fs.readFileSync(filePath, 'utf8');
  
  data = data.replace(/\${([^}]*)}/g, (match, p1) => {
    const variableName = p1.replace(/\${|}/g, '');
    return process.env[variableName] || match
  });
  const doc = {... yaml.load(data)};
  return doc;
};

async function swaggerGen (){
  dotenv.config({ path: `.env.local`, override: true });

  try {
    
    const outputFile = `${__dirname}/swagger-output.yaml`;
    const routes = [`${__dirname}/../routers/urls.mjs`];
    const doc = loadDoc();
    /* NOTE: If you are using the express Router, you must pass in the 'routes' only the 
    root file where the route starts, such as index.js, app.js, routes.js, etc ... */
    
    const specifications = await swaggerAutogen({openapi: '3.0.0'})(outputFile, routes, doc)
    
    console.log(`Swagger YAML generated successfully into ${outputFile}`);
    const yamlFormat = yaml.dump(specifications.data);
    fs.writeFileSync(outputFile, yamlFormat, 'utf-8');

  } catch (e) {
    console.log('Ups some Bad was happened: ',e);
  };  
};

swaggerGen();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="index.module_mjs%2520principal%2520entry%2520for%2520the%2520app.html">mjs principal entry for the app</a></li><li><a href="module-UserController%2520this%2520module%2520define%2520the%2520user%2520controllers%2520for%2520HTTP%2520methods.html">UserController this module define the user controllers for HTTP methods</a></li><li><a href="module-otherUserRouter%2520this%2520is%2520the%2520module%2520to%2520route%2520the%2520otherUser.html">otherUserRouter this is the module to route the otherUser</a></li><li><a href="module-userRouter%252520this%252520is%252520the%252520module%252520to%252520route%252520the%252520user.html">userRouter this is the module to route the user</a></li><li><a href="swagger.module_mjs%2520swagger%2520generation.html">mjs swagger generation</a></li></ul><h3>Classes</h3><ul><li><a href="User.html">User</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Mar 03 2024 21:56:57 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
